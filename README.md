# rsk_backend





## Архитектура

>| Сервис           | Описание |
>|------------------|----------|
>| **admin_service** | Админка Telegram бота, взаимодействует с другими сервисами через HTTPX, общается с сервисом orgs_service,teams_service, нужна для передачи админам запроса о регистрации новой организации в бд, и ее дальнейшего использования в сервисах |
>| **auth_service**  | Сервис аутентификации, отправляет события в RabbitMQ передача айдишника юзера для обработки в user_profile и создания пустого профиля по айди юзера |
>| **user_profile**  | Сервис профилей пользователей<br><br>Получает ID пользователей из очереди RabbitMQ<br><br>Создает пустые профили для новых пользователей по только что зареганному айдишнику.<br><br>Позволяет пользователям заполнять свои профили |
>| **orgs_service**  | Сервис организаций<br><br>Управляет организациями<br><br>Если организации не существует, отправляет запрос в admin_service<br><br>Рассылает уведомления администраторам через Telegram бота на апрув или отказ добавлять переданную оргу в бд |
>| **teams_service** | Сервис команд<br><br>Позволяет создавать команды<br><br>Использует JWT для определения leader_id (текущего пользователя)<br><br>Интегрируется с orgs_service для проверки организаций на их существование в бд |

## Поднятие контейнеров ( будет общий контейнер )

> Должны быть на пк установлены Docker, Docker desktop
```sh
git clone https://github.com/kirillysz/RSK_back
```
```sh
cd rsk_back
```

- Запуск сервиса авторизации
```sh
cd auth_service
docker compose up -d --build
```
- Запуск сервиса профилей
```sh
cd user_profile
docker compose up -d --build
```
- Запуск сервиса команд
```sh
cd teams_service
docker compose up -d --build
```
- Запуск сервиса организаций
```sh
cd orgs_service
docker compose up -d --build
```
- Запуск админки ( тг бот + серверная часть fastapi ) 
```sh
cd admin_service
docker compose up -d --build
```







